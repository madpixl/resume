<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8"></meta>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        Spinner v.2
    </title>
    <link rel="stylesheet" href="css/style.css">
    </style>
</head>
<body>
    
<div class="container">  
        <div class="header">
                <h3> Happy To Help Stories </h3>
                <p class="subhead">Mobile first example demonstrating SASS and JS from Static Mockups</p>
        </div>    
<div class="spinner">
     <div class="card">
        <img src="img/circle-guy.png">
        <div class="quote">I am in the process of getting a car loan and Linda has made things 
            so effortless and enjoyable. Thank you very much for helping me save money. </div>
        <div class="attribution">James Bacon<br>Member Since 2012
        </div>    
    </div>

    <div class="card">
            <img src="img/no-image.png"> 
            <div class="quote">You have done everything I want a bank to do. Courteous, prompt, polite, professional, and most of all you love what you do and it shows.</div>
            <div class="attribution">Augustine Usch<br>
            Member since 2012
            </div>    
        </div>

        <div class="card">
                <img src="img/no-image.png"> 
                <div class="quote">Bacon ipsum dolor amet cow ham picanha culpa beef ribs in. Ut kevin beef duis meatball ground round. </div>
                <div class="attribution"></div>    
            </div>
            <div class="card">
                    <img src="img/nate.png"> 
                    <div class="quote">Bacon ipsum dolor amet cow ham picanha culpa beef ribs in. Ut kevin beef duis meatball ground round. </div>
                    <div class="attribution">Nate Axtell <br> Member since 2009</div>    
                </div>
               
   </div> 
   <div class="controls">
        <button class="button-left" onclick="moveIt(-1)"><span>&lsaquo;</span></button>
        <button class="button-right" onclick="moveIt(+1)"><span>&rsaquo;</span></button>
    </div>
</div>


<script src="js/find_position.js"></script>

<script>
 currentcard = 0; 
 function moveIt(direction) { 
     //get some values to move about
    const spinner = document.querySelector('.spinner');
    const cards = document.querySelectorAll('.card');
    const limit = cards.length -1;
    const width = window.innerWidth;
    let mobile = true;
    if (width > 780) {
     mobile = false;
    }
    let pos = getPosition(spinner);
    const container = document.querySelector('.container').clientWidth;
     //console.log(container.offsetWidth);

     let moveit =0;
     let fadecard = currentcard; 
     if (direction === 1) {
    
    if (currentcard < limit){
            moveit =    pos.x - container;
            currentcard++; 
        } else {
            moveit=0;
            currentcard = 0;
        }
     } else {
        if (direction === -1) {
            if (currentcard > 0) {
            moveit =   pos.x + container;  
            currentcard--;  
            } else  
              if (currentcard === 0){
                    currentcard = limit;
                    moveit = (limit) * container * - 1;
                     
            }
        }
     }
    if (mobile === true) { 
     cards[fadecard].style.opacity = ".2";
     cards[currentcard].style.opacity = "1";
     spinner.style.left = moveit +'px';
    }  else {
        
        if (ccard===2) {    
        moveit = pos.x - container;    
        spinner.style.transform = `translateX(${moveit}px)`;    
       ccard = 0;    
        } else { 
        moveit = 0;    
        spinner.style.transform = `translateX(${moveit}px)`; 
        ccard = 2;
    }
    console.log(ccard);
    console.log(moveit);
    }


 }
 ccard = 2;
</script>
</body>
</html>